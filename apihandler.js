"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(o,r){function i(e){try{c(a.next(e))}catch(e){r(e)}}function l(e){try{c(a.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,l)}c((a=a.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,a,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,a=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],a=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},__read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,o,r=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,o=0,r=t.length;o<r;o++)!a&&o in t||(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(exports,"__esModule",{value:!0});var game=["diamond","pearl","heartgold","soulsilver","platinum"],johto=range(493,1),globalIdArray=[],perGameCatchEntries=3,gameRegionMap=new Map,pokemonIdMap=[];function uploadAndIngestSave(){document.getElementById("file").click()}function toggleSrcOn(e){document.getElementById(e).setAttribute("src",document.getElementById(e).getAttribute("src").replace(".png","_selected.png"))}function toggleSrcOff(e){document.getElementById(e).setAttribute("src",document.getElementById(e).getAttribute("src").replace("_selected.png",".png"))}function resetAllProgress(){globalIdArray.forEach(function(e){document.getElementById("".concat(e,"_checkbox")).checked&&(document.getElementById("".concat(e,"_checkbox")).checked=!1)})}function JSONgenerate(){var e=document.createElement("a"),t="{";globalIdArray.forEach(function(e){document.getElementById("".concat(e,"_checkbox")).checked?t+='"'.concat(e,'": "completed"'):t+='"'.concat(e,'": "not complete"'),e===globalIdArray.length?t+="\n":t+=",\n"}),t+="}",e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download","progress.json"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}document.getElementById("file").addEventListener("change",function(){document.getElementById("uploadfile").click()},!1);var form=document.querySelector("#upload"),file=document.querySelector("#file");function handleSubmit(e){if(e.preventDefault(),file.value.length){var t=new FileReader;t.onload=logFileAndApplyCheckMarks,t.readAsText(file.files[0])}}function logFileAndApplyCheckMarks(e){var t=e.target.result;document.createElement("img").src=t;var n=JSON.parse(t);for(var a in n)n.hasOwnProperty(a)&&"completed"===n[a]&&null!==document.getElementById("".concat(a,"_checkbox"))&&(document.getElementById("".concat(a,"_checkbox")).checked=!0)}function getCompletedPokemonPct(){var e=0;return globalIdArray.forEach(function(t){document.getElementById("".concat(t,"_checkbox")).checked&&e++}),Math.round(e/(globalIdArray.length-1)*1e4)/100}function tweet(){if(getCompletedPokemonPct()>=100)var e="I ".concat(getCompletedPokemonPct()," % completed my Gen 4 Pokedex! Try out this pokedex helper tool at https://wustlcse204.github.io/10-final-project-individual-evinjaff/");else e="I am ".concat(getCompletedPokemonPct()," % into completing my Gen 4 Pokedex! Try out this pokedex helper tool at https://wustlcse204.github.io/10-final-project-individual-evinjaff/");var t="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(e));document.getElementById("tweetlink").setAttribute("href",t),document.getElementById("tweetlink").click()}function revealDetails(e){null!=document.getElementById("placeholder")&&document.getElementById("placeholder").remove();var t=document.getElementById(e);t.classList.remove("d-none"),t.classList.toggle("show"),document.getElementById("displaybox").innerHTML=document.getElementById(e).innerHTML}function getPokemonNamefromId(e){if(null!=pokemonIdMap[e]&&null!=pokemonIdMap[e]&&""!=pokemonIdMap[e])return pokemonIdMap[e];var t="https://pokeapi.co/api/v2/pokemon/".concat(e),n="",a={type:"GET",url:t,async:!0,success:function(t){n=t.forms[0].name,pokemonIdMap[e]=t.forms[0].name}};return $.ajax(a),n}function initGameRegionMap(){gameRegionMap.set("silver",johto),gameRegionMap.set("gold",johto),gameRegionMap.set("soulsilver",johto),gameRegionMap.set("heartgold",johto)}function createLoadingElement(e){var t=document.createElement("img");return t.id=e,t.setAttribute("src","img/loading.gif"),t.setAttribute("alt","loading"),t}function range(e,t){return void 0===t&&(t=0),__spreadArray([],__read(Array(e).keys()),!1).map(function(e){return e+t})}function hideLoader(){$("#catch_loading_placeholder").hide()}function initializeState(){initGameRegionMap();var e=gameRegionMap.get("heartgold");globalIdArray=e;var t=1;e.forEach(function(n){var a=document.createElement("div");a.setAttribute("id","".concat(n,"_info_container")),a.classList.add("d-none"),a.classList.add("pokemon_info_container"),document.getElementById("pokemon_catch_lookup").appendChild(a),getPokemonCatch(game,n),++t===e.length&&e.forEach(function(e){null!==document.getElementById("".concat(e,"_info_container"))&&document.getElementById("".concat(e,"_info_container")).classList.remove("d-none")})})}function getPokemonSpriteSRC(e){var t="https://pokeapi.co/api/v2/pokemon/".concat(e),n="",a={type:"GET",url:t,async:!1,success:function(e){n=e.sprites.front_default}};return $.ajax(a),n}function getPokemonCatch(e,t){var n={type:"GET",url:"https://pokeapi.co/api/v2/pokemon/".concat(t,"/encounters"),success:function(e){var n=[];e.forEach(function(e){e.version_details.forEach(function(t){if(-1!=game.indexOf(t.version.name)){var a=t;a.version_name=t.version.name,a.location_name=e.location_area.name,n.push(a)}})}),updatePokemonCatchUI(t,n)},failure:function(e){}};$.ajax(n)}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function replaceSrc(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,new Promise(function(e){return setTimeout(e,1e3)})];case 1:return n.sent(),document.getElementById(e).setAttribute("src","".concat(getPokemonSpriteSRC(t))),[2]}})})}function updatePokemonCatchUI(e,t){var n=document.getElementById("".concat(e,"_info_container"));n.innerHTML="";var a=document.createElement("div");a.classList.add("visible_pokemon_region");var o="https://pokeapi.co/api/v2/pokemon/".concat(e),r="",i={type:"GET",url:o,async:!0,success:function(o){r=o.forms[0].name,pokemonIdMap[e]=o.forms[0].name;var i=r;a.innerHTML='\n            <input id="'.concat(e,'_checkbox" type="checkbox" class="pokemon_checkbox">\n            \n            <img id="').concat(e,'_sprite" style="width: 30%" src="img/loadingpokeball.gif" alt="').concat(e,' sprite">\n            \n            <strong class="pokemon-title" onmouseleave=\'onclick=revealDetails("').concat(e,"_details\")' onmouseover='onclick=revealDetails(\"").concat(e,"_details\")'>").concat(e,": ").concat(removePastTheDash(capitalizeFirstLetter(i)),"</p>\n        \n            \n            "),n.appendChild(a);var l=document.createElement("div");if(l.innerHTML+='<p class="pokemondetailtitle">'.concat(removePastTheDash(capitalizeFirstLetter(i)),"</p>"),l.setAttribute("id","".concat(e,"_details")),l.classList.add("pokemonDetails"),replaceSrc("".concat(e,"_sprite"),e),0==t.length){var c=document.createElement("p"),s={type:"GET",url:"https://pokeapi.co/api/v2/pokemon-species/".concat(e),success:function(e){var t=e.evolves_from_species;if(null!=t){var n={type:"GET",url:e.evolution_chain.url+"?rv="+Math.random(),success:function(e){null!=e.chain?c.innerHTML=traverseAndDetermineEvolution(e.chain,i):(c.innerHTML="<em>Evolution: </em> ",c.innerHTML+="Evolve from ".concat(t.name))},failure:function(e){}};$.ajax(n)}else e.is_baby?c.innerHTML='<img src="img/egg.gif" style="width: 10%" alt="egg">Obtain via hatching.':e.is_mythical?c.innerHTML='<img src="img/cherishball.webp" style="width: 10%" alt="cherishball">Is mythical and can only be obtained from special distribution events.':c.innerHTML="Unable to be caught."}};$.ajax(s),l.appendChild(c)}else{var d=1;(t=sortAndPruneEncounterArray(t)).every(function(e){var t=buildCompositePct(e.encounter_details),n=buildEncounterHTML(e.location_name,t,e.version_name);return l.appendChild(n),10!==d&&(d++,!0)})}n.appendChild(l)}};$.ajax(i)}function buildEncounterHTML(e,t,n){var a=document.createElement("p");return a.innerHTML='<img width="10%" src="img/'.concat(n,'.png">  <img width="5%" src="img/shakinggrass.gif" alt="shaking grass"><em>Catching: </em> '),a.innerHTML+=cleanLocationString(e),t.forEach(function(t,o){100===t?a.innerHTML=' <img width="10%" src="img/'.concat(n,'.png"> <em>Static Encounter/Gift Pokemon: </em> <img width="5%" src="img/Bag_Parcel_Sprite.webp" alt="parcel"> ').concat(e," \n"):a.innerHTML+=cleanConditionString(o,t)}),a}function cleanConditionString(e,t){return"stock"===e?": "+t+"%":"radar-on"===e?": "+t+'% (<img width="5%" src="img/pokeradar.png" alt="pokeradar"> Pokeradar)':"swarm-yes"===e?": "+t+'% (<img width="5%" src="img/swarm.png" alt="pokeradar"> Swarm)':"slot2-all"===e?": "+t+'% (<img width="7%" src="img/all.png" alt="pokeradar"> Dual Slot with all games)':"slot2-frlge"===e?": "+t+'% (<img width="7%" src="img/frlge.png" alt="pokeradar"> Dual Slot with FireRed, LeafGreen, and Emerald)':"slot2-sapphire"===e?": "+t+'% (<img width="7%" src="img/saphire.png" alt="pokeradar"> Pokemon Sapphire Dual Slot)':"slot2-ruby"===e?": "+t+'% (<img width="7%" src="img/ruby.png" alt="pokeradar"> Pokemon Ruby Dual Slot)':"slot2-emerald"===e?": "+t+'% (<img width="7%" src="img/emerald.png" alt="pokeradar"> Pokemon Emerald Dual Slot)':"slot2-leafgreen"===e?": "+t+'% (<img width="7%" src="img/leafgreen.png" alt="pokeradar"> Pokemon LeafGreen Dual Slot)':"slot2-firered"===e?": "+t+'% (<img width="7%" src="img/firered.png" alt="pokeradar"> Pokemon FireRed Dual Slot)':" "+e+": "+t+"%"}function cleanLocationString(e){return e.replace("-area","").replace("-"," ")}function buildCompositePct(e){var t=new Map;t.set("stock",0);return e.forEach(function(e){0===e.condition_values.length?t.set("stock",t.get("stock")+e.chance):e.condition_values.forEach(function(n){n.name.includes("-no")||n.name.includes("-off")?t.set("stock",t.get("stock")+e.chance):t.get("stock")>0&&n.name.includes("slot2")||t.set(n.name,e.chance)}),t.forEach(function(e,n){e<=t.get("stock")&&"stock"!==n&&t.delete(n)})}),0===t.get("stock")&&t.delete("stock"),t.has("slot2-ruby")&&t.has("slot2-ruby")&&t.has("slot2-sapphire")&&t.has("slot2-emerald")&&t.has("slot2-firered")&&t.has("slot2-leafgreen")?(t.set("slot2-all",t.get("slot2-ruby")),t.delete("slot2-ruby"),t.delete("slot2-ruby"),t.delete("slot2-sapphire"),t.delete("slot2-emerald"),t.delete("slot2-firered"),t.delete("slot2-leafgreen")):t.has("slot2-emerald")&&t.has("slot2-firered")&&t.has("slot2-leafgreen")&&(t.set("slot2-frlge",t.get("slot2-emerald")),t.delete("slot2-emerald"),t.delete("slot2-firered"),t.delete("slot2-leafgreen")),t}function traverseAndDetermineEvolution(e,t){try{for(var n=e,a=e;;){if(a.evolves_to.length>1)for(var o=0;o<a.evolves_to.length;o++){if(a.evolves_to[o].species.name===t||a.evolves_to[o].species.name===removePastTheDash(t)){return buildEvoString(a.evolves_to[o].evolution_details[0],n)}for(var r=0;r<a.evolves_to[o].evolves_to.length;r++)if(a.evolves_to[o].evolves_to[r].species.name===t||a.evolves_to[o].evolves_to[r].species.name===removePastTheDash(t))return buildEvoString(a.evolves_to[o].evolves_to[r].evolution_details[0],a.evolves_to[o])}if(0===a.evolves_to.length)return buildEvoString(a.evolution_details[0],n);if(a.evolves_to[0].species.name===t){return buildEvoString(a.evolves_to[0].evolution_details[0],n)}n=a=a.evolves_to[0]}}catch(e){return"Unknown Evolution Method"}}function appendGenderString(e,t){return null===e?t:2===e?"male "+t:"female "+t}function buildEvoString(e,t){var n="",a=capitalizeFirstLetter(t.species.name);if("Cherrim"===a&&(a="Cherubi"),Array.isArray(e)){if("level-up"===e[0].trigger.name)n='<img width="10%" src="img/rarecandy.webp" alt="rare candy"> Level up '.concat(appendGenderString(e[0].gender,a));else if("use-item"===e[0].trigger.name)n='<img width="10%" src="img/placeholderitem.png" alt="rare candy"> Use a  ';else if("trade"===e[0].trigger.name)n='<img width="10%" src="img/trade.webp" alt="rare candy"> Trade  '.concat(appendGenderString(e[0].gender,a));else{if("shed"===e[0].trigger.name)return'<img width="10%" src="img/shedshell.webp" alt="rare candy"> Evolve Nincada while possessing a pokeball and an open slot in your party';n="Weird Shit"}if(null!=e[0].item){o=e[0].item.name.replace("-","").toLowerCase();n='<img width="10%" src="img/'.concat(o,'.webp" alt="').concat(o,'"> ')+n,n+=" ".concat(e[0].item.name.replace("-"," ")," on ").concat(appendGenderString(e[0].gender,a))}null!=e[0].min_level&&(n+=" to level ".concat(e[0].min_level)),null!=e[0].min_happiness&&(n+=" with high friendship"),null!=e[0].held_item&&(n+=" holding a ".concat(e[0].held_item.name.replace("-"," "))),null!=e[0].known_move&&(n+=" and teach it ".concat(e[0].known_move.name.replace("-"," "))),null!=e[0].time_of_day&&""!=e[0].time_of_day&&(n+=" at ".concat(e[0].time_of_day.replace("-"," "))),null!=e[0].relative_physical_stats&&(n+=" with its ".concat(determineGreaterStat(e[0].relative_physical_stats))),null!=e[0].location&&(n+=" at ".concat(e[0].location.name.replace("-"," ")))}else{if("level-up"===e.trigger.name)n='<img width="10%" src="img/rarecandy.webp" alt="rare candy"> Level up '.concat(appendGenderString(e.gender,a));else if("use-item"===e.trigger.name)n="Use a  ";else if("trade"===e.trigger.name)n='<img width="10%" src="img/trade.webp" alt="rare candy"> Trade  '.concat(appendGenderString(e.gender,a));else{if("shed"===e.trigger.name)return'<img width="10%" src="img/shedshell.webp" alt="rare candy"> Evolve Nincada while possessing a pokeball and an open slot in your party';n="Weird Stuff"}if(null!=e.item){var o=e.item.name.replace("-","").toLowerCase();n='<img width="10%" src="img/'.concat(o,'.webp" alt="').concat(o,'"> ')+n,n+=" ".concat(e.item.name.replace("-"," ")," on ").concat(appendGenderString(e.gender,a))}null!=e.min_level&&(n+=" to level ".concat(e.min_level)),null!=e.held_item&&(n+=" holding a ".concat(e.held_item.name.replace("-"," "))),null!=e.min_happiness&&(n+=" with high friendship"),null!=e.min_beauty&&(n+=" with high beauty"),null!=e.known_move&&(n+=" and teach it ".concat(e.known_move.name.replace("-"," "))),null!=e.party_species&&(n+=" with a ".concat(e.party_species.name.replace("-"," ")," in your party")),null!=e.time_of_day&&""!=e.time_of_day&&(n+=" at ".concat(e.time_of_day.replace("-"," "))),null!=e.relative_physical_stats&&(n+=" with its ".concat(determineGreaterStat(e.relative_physical_stats))),null!=e.location&&(n+=" at ".concat(e.location.name.replace("-"," ")))}return n}function removePastTheDash(e){return"oh"===e.split("-")[1]||"mime"===e.split("-")[1]||"jr"===e.split("-")[1]?e:e.split("-")[0]}function determineGreaterStat(e){switch(e){case 0:return"attack and defense equal";case-1:return"defense greater than attack";case 1:return"attack greater than defense"}}function sortAndPruneEncounterArray(e){var t=e;t.sort(function(e,t){var n=e.version_name,a=t.version_name;switch(n){case"soulsilver":return"soulsilver"===a?0:-1;case"heartgold":return"soulsilver"===a?1:"heartgold"===a?0:-1;case"diamond":return"soulsilver"===a?1:"heartgold"===a?1:"diamond"===a?0:-1;case"pearl":return"soulsilver"===a?1:"heartgold"===a?1:"diamond"===a?1:"pearl"===a?0:-1;case"platinum":return"soulsilver"===a?1:"heartgold"===a?1:"diamond"===a?1:"pearl"===a?1:0;default:throw"Unknown Game"+n+" , "+a}});var n=[],a=[],o=perGameCatchEntries,r=0;return t.forEach(function(e){if(gameExistsInArrayAlready(e.version_name,n));else{if(a.push(e),!allVersionKeysMatch(a)){var i=a.slice(a.length-1,a.length);n=n.concat(a.slice(0,a.length-1)),a=i}r++,a.length!==o&&t.length!==r||(n=n.concat(a),a=[])}}),n}function allVersionKeysMatch(e){if(0===e.length)return!0;var t=e[0].version_name,n=!0;return e.forEach(function(e){e.version_name!==t&&(n=!1)}),n}function gameExistsInArrayAlready(e,t){if(0===t.length)return!1;var n=!1;return t.forEach(function(t){t.version_name===e&&(n=!0)}),n}form.addEventListener("submit",handleSubmit),$(window).ready(hideLoader),setTimeout(hideLoader,2e4),window.addEventListener("load",function(){initializeState()},!1);